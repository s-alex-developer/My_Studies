*Последние изменения внесены 31.05.2023*

# Модуль re в Python

Для работы с регулярными выражениями в **Python** используется встроенный модуль `re` не требующий дополнительной установки.



```python
import re

text = "Регулярное выражение, слово заглушка регулярные выражения, еще одно слово заглушка регулярных выражений, \
регулярного выражения конец строки"
```

### 1. Метод `.match(pattern, string, flags=0)`

* Ищет по заданному шаблону в начале строки.


```python
pattern = "[Рр]егулярн[а-я]+ выражени[а-я]+"

result  = re.match(pattern, text)

print(result)
```

    <re.Match object; span=(0, 20), match='Регулярное выражение'>
    


```python
print(result.span(0)) # возвращает индексы нахохждения элемента в строке
```

    (0, 20)
    


```python
print(result.group(0)) # возвращает результат поиска
```

    Регулярное выражение
    

* Также есть методы `start()` и `end()` для того, чтобы узнать начальную и конечную позицию найденной строки.

### 2. Метод `.search(pattern, string, flags=0)`

* Ищет во всем тексте, возвращает первое совпадение


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

result  = re.search(pattern, text)

print(result)
```

    <re.Match object; span=(22, 42), match='регулярные выражения'>
    


```python
print(result.span(0)) # возвращает индексы нахохждения элемента в строке
```

    (22, 42)
    


```python
print(result.group(0)) # возвращает результат поиска
```

    регулярные выражения
    

### 3. Метод `.findall(pattern, string, flags=0)`

* Ищет во всем тексте, возвращает список всех найденных совпадений
* Для поиска рекомендуется использовать именно `findall()`, так как он может работать и как `.search()`, и как `.match()`.


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

result  = re.findall(pattern, text)

print(result)
```

    ['регулярные выражения', 'регулярных выражений', 'регулярного выражения']
    

**>>> Применим флаг `re.IGNORECASE` (можно просто `re.I`) для подавления регистрозависимости и сравним результаты.**


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

result  = re.findall(pattern, text, flags=re.IGNORECASE)

print(result)
```

    ['Регулярное выражение', 'регулярные выражения', 'регулярных выражений', 'регулярного выражения']
    

* **"Регулярное выражение"** - записанное с заглавной буквы теперь так же попадает в результирующую выборку.

**>>> По аналогии можно применить флаги в с другими методами, например с методом `.match()`**


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

result  = re.match(pattern, text, flags=re.I)

print(result)
```

    <re.Match object; span=(0, 20), match='Регулярное выражение'>
    

### 4. Метод `.split(pattern, string, maxsplit=0, flags=0)`

* Разделяет строку по заданному шаблону


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

result  = re.split(pattern, text, flags=re.I)

print(result)
```

    ['', ', слово заглушка ', ', еще одно слово заглушка ', ', ', ' конец строки']
    

* Работает по аналогии со строковым методом `split()` используя в качестве разделителя наш паттерн
* Метод `split()` принимает также аргумент `maxsplit` со значением по умолчанию, равным **0**. 
* Он разделит строку столько раз, сколько возможно, но если указать этот аргумент, то разделение будет произведено не более указанного количества раз.


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

result  = re.split(pattern, text, maxsplit=1, flags=re.I)

print(result)
```

    ['', ', слово заглушка регулярные выражения, еще одно слово заглушка регулярных выражений, регулярного выражения конец строки']
    

* Использовали паттерн один раз, убрав тем самых из итогового результат одно совпадение по нашему шаблону.

### 5. Метод `.sub(pattern, repl, string)`

* Ищет шаблон в строке и заменяет его на указанную подстроку


```python
pattern = "регулярн[а-я]+ выражени[а-я]+"

swap = 'RegExp'

result  = re.sub(pattern, swap, text, flags=re.I)

print(result)
```

    RegExp, слово заглушка RegExp, еще одно слово заглушка RegExp, RegExp конец строки
    

### 6. Метод `.recomplite(pattern, flags=0)`

* Мы можем собрать регулярное выражение в отдельный объект, который может быть использован для поиска. 
* Это также избавляет от переписывания одного и того же выражения.


```python
pattern = re.compile("регулярн[а-я]+ выражени[а-я]+", flags=re.I)
result = pattern.findall(text)
print (result)
```

    ['Регулярное выражение', 'регулярные выражения', 'регулярных выражений', 'регулярного выражения']
    

### 7. Операторы

* До сих пор мы рассматривали поиск определенной последовательности символов. 
* Но что, если у нас нет определенного шаблона, и нам надо вернуть набор символов из строки, отвечающий определенным правилам? 
* Такая задача часто стоит при извлечении информации из строк. 
* Это можно сделать, написав выражение с использованием специальных символов. 
* Вот наиболее часто используемые из них:
    ***
    * `.`	- Один любой символ, кроме новой строки \n.
    ***
    * `?` - 0 или 1 вхождение шаблона слева
    ***
    * `+` - 1 и более вхождений шаблона слева
    ***
    * `*` - 0 и более вхождений шаблона слева
    ***
    * `\w` - Любая цифра или буква (\W — все, кроме буквы или цифры)
    ***
    * `\d` - Любая цифра [0-9] (\D — все, кроме цифры)
    ***
    * `\s` - Любой пробельный символ (\S — любой непробельный символ)
    ***
    * `\b` - Граница слова
    ***
    * `[..]` - Один из символов в скобках ([^..] — любой символ, кроме тех, что в скобках)
    ***
    * `\` - Экранирование специальных символов (\. означает точку или \+ — знак «плюс»)
    ***
    * `^` и `$` - Начало и конец строки соответственно
    ***
    * `{n,m}` - От n до m вхождений ({,m} — от 0 до m)
    ***
    * `a|b` - Соответствует a или b
    ***
    * `()` - Группирует выражение и возвращает найденный текст
    ***
    * `\t, \n, \r` - Символ табуляции, новой строки и возврата каретки соответственно
